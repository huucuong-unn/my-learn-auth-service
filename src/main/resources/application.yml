server:
  port: 8080
  # Context path is explicitly defined here, but in a Kubernetes/Gateway setup,
  # the service would be accessed via its internal service name (auth-service)
  servlet:
    context-path: /api/v1/auth

spring:
  application:
    name: auth-service
  datasource:
    # We use a service name (e.g., 'postgres') that will be resolvable either via
    # Docker Compose or Kubernetes Service Discovery.
    url: jdbc:postgresql://localhost:5432/mylearndb
    username: myuser
    password: mypassword
    driver-class-name: org.postgresql.Driver
  # --- JPA/Hibernate Configuration ---
  jpa:
    hibernate:
      # We use 'none' here because we rely on Flyway for schema management.
      # Never use 'update' or 'create-drop' in a production microservice.
      ddl-auto: none
    show-sql: false # Set to true for debugging SQL queries
    properties:
      hibernate:
        format_sql: true
        # Define the dialect for PostgreSQL 10+
        dialect: org.hibernate.dialect.PostgreSQLDialect
  # --- Flyway Migration Configuration ---
  flyway:
    enabled: true
    locations: classpath:db/migration
    # Flyway will apply migrations automatically on startup
    baseline-on-migrate: true
    baseline-version: 0

# --- JWT Configuration for JwtService ---
application:
  security:
    jwt:
      # CRITICAL: This base64 encoded secret MUST be at least 256 bits (32 bytes) long.
      # This is a placeholder; use a securely generated key in production.
      secret-key: NzY1OTQ4MzI3MTMyNDAzNTA1MTIzNTI1MzM4OTg0NDQ1OTY3NzYxMjMzNzg5NDU4MzA1OTY3NzUxNTk5NjU4MjQ3MQ==
      # Access token validity in milliseconds (1 hour)
      access-token:
        expiration: 3600000
      # Refresh token validity in milliseconds (7 days)
      refresh-token:
        expiration: 604800000

# --- Application Configuration ---
app:
  services:
    # Service discovery URL for the User Service (DNS name in Docker/K8s)
    # Used by WebClientConfig.java
    user-service-url: http://user-service:8081

# --- Logging Configuration ---
#logging:
#  level:
#    root: trace
#logging:
#  level:
#    org.flywaydb: DEBUG